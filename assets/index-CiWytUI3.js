var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-DJc9ez-r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}const i=Phaser.Input.Keyboard.KeyCodes;class r{constructor(){t(this,"type"),t(this,"alive",!1),t(this,"timer",0)}}class o extends s.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"bg"),t(this,"msg_text"),t(this,"cody"),t(this,"keys"),t(this,"slots",[]),t(this,"slot_gfx",[]),t(this,"cells",[]),t(this,"NUM_COLS",3),t(this,"NUM_ROWS",2),t(this,"NUM_MOLES",6),t(this,"score",0)}create(){const{add:e,input:t}=this,s=this.camera=this.cameras.main;this.camera.postFX.addVignette(.5,.5,.9);const a=130*this.NUM_COLS-0,o=130*this.NUM_ROWS-0;this.bg=e.image(this.camera.centerX,this.camera.centerY,"background"),this.bg.setAlpha(.5),this.bg.setDisplaySize(this.camera.width,this.camera.height);const n=e.text(512,384,"LD56",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"});if(n.setOrigin(.5),n.y=20,this.score_text=n,!t.keyboard)return;const h=this.add.group();for(let i=0;i<30;i++){const e=this.add.sprite(0,0,"drop").setInteractive();h.add(e),e.playAfterDelay("drop",Phaser.Math.Between(0,1500)),e.on("pointerdown",(()=>{e.visible=!1})),e.on("pointerover",(()=>{e.setTint(16711680)})),e.on("pointerout",(()=>{e.setTint(16777215)}))}this.cells=h.getChildren(),this.cells.forEach((e=>{e.angle=Phaser.Math.Angle.RandomDegrees(),e.setScale(.65);const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x=Math.cos(t)*s.width/2+s.centerX,e.y=Math.sin(t)*s.height/2+s.centerY})),this.add.rectangle(s.centerX,s.centerY,a,o,0);const l=this.add.group();l.setDepth(2),this.slot_gfx=this.add.group({key:"blerb",frameQuantity:this.NUM_MOLES}).setDepth(1).getChildren();const c=(s.width-a)/2,d=(s.height-o)/2;for(let i=0;i<this.NUM_MOLES;i++){const e=i%this.NUM_COLS*130+65+c,t=130*Math.floor(i/this.NUM_COLS)+65+d;l.add(this.add.rectangle(e,t,130,130,3355443),!0),this.slots.push(new r),this.slot_gfx[i].x=e,this.slot_gfx[i].y=t,this.slot_gfx[i].visible=!1}const g=l.getChildren();this.mole_cell_bg=g,g.forEach((e=>e.alpha=0)),this.cursors=t.keyboard.createCursorKeys(),this.space=t.keyboard.addKey(i.SPACE),this.keys=[t.keyboard.addKey(i.Q),t.keyboard.addKey(i.W),t.keyboard.addKey(i.E),t.keyboard.addKey(i.A),t.keyboard.addKey(i.S),t.keyboard.addKey(i.D)];const m=e.sprite(100,100);m.setScale(1.5),m.play("walk"),this.cody=m,new Phaser.Geom.Rectangle(0,0,this.sys.game.scale.gameSize.width,this.sys.game.scale.gameSize.height)}update(){const{cody:e,keys:t,camera:s,cursors:a,space:i,cells:r}=this,o=s.centerX,n=s.centerY;let h=0,l=0;i.isDown&&(h+=10),a.right.isDown&&h++,a.left.isDown&&h--,a.down.isDown&&l++,a.up.isDown&&l--,r.forEach((e=>{const t=Phaser.Math.Angle.Between(e.x,e.y,o,n);if(e.x+=.15*Math.cos(t),e.y+=.15*Math.sin(t),Phaser.Math.Distance.Between(e.x,e.y,o,n)<20&&(e.visible=!1),0==e.visible){e.visible=!0;const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x+=Math.cos(t)*s.width*.5,e.y+=Math.sin(t)*s.width*.5}e.angle+=1})),this.slots.forEach(((e,s)=>{e.alive?(t[s].isDown&&(e.alive=!1,this.mole_cell_bg[s].alpha=1,0==e.type?(this.score+=1,this.mole_cell_bg[s].fillColor=26112):(this.score-=20,this.mole_cell_bg[s].fillColor=4456448),this.tweens.add({targets:this.mole_cell_bg[s],alpha:0}),this.score_text.text=this.score,this.slot_gfx[s].visible=!1),e.timer--<=0&&(e.alive=!1,this.slot_gfx[s].visible=!1)):1==Phaser.Math.Between(0,200)&&(e.alive=!0,e.timer=150,e.type=Phaser.Math.Between(0,100)<65?0:1,this.slot_gfx[s].fillColor=3355443,this.slot_gfx[s].visible=!0,this.slot_gfx[s].play(["blerb2","blerb"][e.type]))})),h||l?(e.x+=h,e.y+=l,e.play("walk",!0)):e.stop()}}class n extends s.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class h extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.scene.start("Game")}}class l extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.spritesheet("walk","sheet.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb","blerb.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb2","blerb2.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("drop","drop.png",{frameWidth:64,frameHeight:64})}create(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("walk",{frames:[0,1,2,3,4,5,6,7,8,9,10]}),frameRate:10,repeat:-1}),this.anims.create({key:"blerb",frames:this.anims.generateFrameNumbers("blerb"),frameRate:10,repeat:-1}),this.anims.create({key:"blerb2",frames:this.anims.generateFrameNumbers("blerb2"),frameRate:10,repeat:-1}),this.anims.create({key:"drop",frames:this.anims.generateFrameNumbers("drop"),frameRate:12,repeat:-1}),this.scene.start("MainMenu")}}const c={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#000",pixelArt:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,l,h,o,n]};new s.Game(c);
