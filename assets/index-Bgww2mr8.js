var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-DJc9ez-r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class r extends Phaser.GameObjects.Sprite{constructor(e,s,a){super(e,s,a,"drop"),t(this,"target"),t(this,"speed"),this.setInteractive(),this.speed=Phaser.Math.FloatBetween(.13,.25),this.angle=Phaser.Math.Angle.RandomDegrees(),this.setScale(.65)}update(){if(!this.target)return;const{target:e,speed:t}=this,s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.x+=Math.cos(s)*t,this.y+=Math.sin(s)*t,this.angle+=.5,Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y)<10&&(this.target=null)}}const i=Phaser.Input.Keyboard.KeyCodes;class o{constructor(){t(this,"type"),t(this,"alive",!1),t(this,"timer",0)}}const n=class e extends s.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"bg"),t(this,"msg_text"),t(this,"keys"),t(this,"slots",[]),t(this,"slot_gfx",[]),t(this,"cells",[]),t(this,"cell_layer"),t(this,"NUM_COLS",3),t(this,"NUM_ROWS",2),t(this,"NUM_MOLES",6),t(this,"score",0)}get_cell_target(e,t){const{camera:s}=this,a=new Phaser.Geom.Point(s.centerX,s.centerY),r=Phaser.Math.Angle.Between(e,t,a.x,a.y);return a.x-=200*Math.cos(r),a.y-=200*Math.sin(r),a}create(){const{add:t,input:s}=this;s.setDefaultCursor("url(assets/syr.png), pointer");const a=this.camera=this.cameras.main;this.camera.setBackgroundColor(0);const n=180*this.NUM_COLS-0,h=180*this.NUM_ROWS-0;this.bg=t.image(a.centerX,a.centerY,"background"),this.bg.setAlpha(.1),this.bg.setDisplaySize(a.width,a.height),this.bg.postFX.addVignette(.5,.5,.6),this.add.circle(a.centerX,a.centerY,220,3407616,.1);for(let e=0;e<10;e++){const t=this.add.graphics();t.lineStyle(4,3407616,1),t.beginPath();const s=e/10*(2*Math.PI);t.arc(a.centerX,a.centerY,220,s,s-.5,!0),t.strokePath()}const c=t.text(512,384,"LD56",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"});if(c.setOrigin(.5),c.y=20,this.score_text=c,!s.keyboard)return;const l=this.add.group();for(let i=0;i<e.MAX_CELLS;i++){const e=new r(this,0,0);this.cells.push(e),l.add(e,!0);const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x=Math.cos(t)*a.width/2+a.centerX,e.y=Math.sin(t)*a.height/2+a.centerY,e.target=this.get_cell_target(e.x,e.y),e.playAfterDelay("drop",Phaser.Math.Between(0,1500)),e.on("pointerdown",(()=>{e.target=null})),e.on("pointerover",(()=>{e.setTint(65280)})),e.on("pointerout",(()=>{e.setTint(16777215)}))}const d=this.add.group();d.setDepth(2),this.slot_gfx=this.add.group({key:"blerb",frameQuantity:this.NUM_MOLES}).getChildren();const g=(a.width-n)/2,m=(a.height-h)/2;for(let e=0;e<this.NUM_MOLES;e++){const t=e%this.NUM_COLS*180+90+g,s=180*Math.floor(e/this.NUM_COLS)+90+m;d.add(this.add.rectangle(t,s,180,180,3355443),!0);const r=this.add.text(t-50,s-50,"QWEASD".split("")[e],{fontFamily:"Arial Black",fontSize:18,color:"#ffffff"});this.slots.push(new o);const i=e/this.NUM_MOLES*Math.PI*2-Phaser.Math.DegToRad(145),n=160;this.slot_gfx[e].x=a.centerX+Math.cos(i)*n,this.slot_gfx[e].y=a.centerY+Math.sin(i)*n,this.slot_gfx[e].visible=!1,r.x=a.centerX+240*Math.cos(i)-5,r.y=a.centerY+240*Math.sin(i)-5}(this.slot_bg=d.getChildren()).forEach((e=>e.alpha=0)),this.keys=[s.keyboard.addKey(i.Q),s.keyboard.addKey(i.W),s.keyboard.addKey(i.E),s.keyboard.addKey(i.D),s.keyboard.addKey(i.S),s.keyboard.addKey(i.A)],this.add.particles(0,100,"drop",{x:{min:0,max:a.width},y:{min:0,max:a.height},quantity:2,lifespan:2500,blendMode:Phaser.BlendModes.MULTIPLY,accelerationX:[-100,100],accelerationY:[-100,100],scale:.1})}update(){const{keys:e,cells:t,camera:s,slots:a,slot_bg:r}=this;t.forEach((e=>{if(e.update(),!e.target){const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x=Math.cos(t)*s.width/2+s.centerX,e.y=Math.sin(t)*s.height/2+s.centerY,e.target=this.get_cell_target(e.x,e.y)}})),a.forEach(((t,a)=>{t.alive?(e[a].isDown&&(t.alive=!1,0==t.type?(this.score+=1,this.slot_gfx[a].play("bot1_die")):(s.shake(100,.02),this.score-=20,this.slot_gfx[a].visible=!1),this.tweens.add({targets:this.slot_bg[a],alpha:0}),this.score_text.text=this.score),t.timer--<=0&&(t.alive=!1,this.slot_gfx[a].visible=!1)):1==Phaser.Math.Between(0,200)&&(t.alive=!0,t.timer=150,t.type=Phaser.Math.Between(0,100)<65?0:Phaser.Math.Between(0,100)<50?1:2,this.slot_gfx[a].visible=!0,this.slot_gfx[a].play(["bot1","blerb","blerb2"][t.type]))}))}};t(n,"MAX_CELLS",30);let h=n;class c extends s.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class l extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.scene.start("Game")}}class d extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.spritesheet("walk","sheet.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb","blerb.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("blerb2","blerb2.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("drop","drop.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("bot1","bot1.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("mol","mol.png",{frameWidth:512,frameHeight:288})}create(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("walk",{frames:[0,1,2,3,4,5,6,7,8,9,10]}),frameRate:10,repeat:-1}),this.anims.create({key:"blerb",frames:this.anims.generateFrameNumbers("blerb"),frameRate:10,repeat:-1}),this.anims.create({key:"blerb2",frames:this.anims.generateFrameNumbers("blerb2"),frameRate:10,repeat:-1}),this.anims.create({key:"drop",frames:this.anims.generateFrameNumbers("drop"),frameRate:12,repeat:-1}),this.anims.create({key:"bot1",frames:this.anims.generateFrameNumbers("bot1",{start:0,end:9}),frameRate:10,repeat:-1}),this.anims.create({key:"bot1_die",frames:this.anims.generateFrameNumbers("bot1",{start:10,end:19}),frameRate:20,repeat:0}),this.anims.create({key:"mol",frames:this.anims.generateFrameNumbers("mol"),frameRate:3,repeat:-1}),this.scene.start("MainMenu")}}const g={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#000",pixelArt:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,d,l,h,c]};new s.Game(g);
