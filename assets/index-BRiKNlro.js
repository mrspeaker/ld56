var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-DJc9ez-r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class r extends Phaser.GameObjects.Sprite{constructor(e,s,a){super(e,s,a,"drop"),t(this,"target"),t(this,"speed"),this.setInteractive(),this.speed=Phaser.Math.FloatBetween(.13,.25),this.angle=Phaser.Math.Angle.RandomDegrees(),this.setScale(.65)}update(){if(!this.target)return;const{target:e,speed:t}=this,s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.x+=Math.cos(s)*t,this.y+=Math.sin(s)*t,this.angle+=.5,Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y)<10&&(this.target=null)}}class i extends Phaser.GameObjects.Sprite{constructor(e,s,a){super(e,s,a,"drop"),t(this,"cooldown")}update(e){if(this.x+=.05,this.cooldown-- >0)return null;let t=-1,s=99999;for(let a=0;a<e.length;a++){const r=e[a],i=Phaser.Math.Distance.Between(this.x,this.y,r.x,r.y);i<s&&(s=i,t=a)}return s<200?(this.cooldown=200,e[t]||null):null}}class o extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s,"drop"),this.setScale(.3)}}const n=Phaser.Input.Keyboard.KeyCodes;class h{constructor(){t(this,"type"),t(this,"alive",!1),t(this,"timer",0)}}const l=class e extends s.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"bg"),t(this,"msg_text"),t(this,"cody"),t(this,"keys"),t(this,"slots",[]),t(this,"slot_gfx",[]),t(this,"cells",[]),t(this,"turrets",[]),t(this,"cell_layer"),t(this,"NUM_COLS",3),t(this,"NUM_ROWS",2),t(this,"NUM_MOLES",6),t(this,"score",0)}create(){const{add:t,input:s}=this,a=this.camera=this.cameras.main;this.camera.setBackgroundColor(0),this.camera.postFX.addVignette(.5,.5,.9,.3);const o=130*this.NUM_COLS-0,l=130*this.NUM_ROWS-0;this.bg=t.image(this.camera.centerX,this.camera.centerY,"background"),this.bg.setAlpha(.5),this.bg.setDisplaySize(this.camera.width,this.camera.height),this.bg.postFX.addVignette(.5,.5,.6);const c=t.text(512,384,"LD56",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"});if(c.setOrigin(.5),c.y=20,this.score_text=c,!s.keyboard)return;const d=this.add.group();for(let i=0;i<e.MAX_CELLS;i++){const e=new r(this,0,0);this.cells.push(e),d.add(e,!0),e.target=new Phaser.Geom.Point(a.centerX,a.centerY);const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x=Math.cos(t)*a.width/2+a.centerX,e.y=Math.sin(t)*a.height/2+a.centerY,e.playAfterDelay("drop",Phaser.Math.Between(0,1500)),e.on("pointerdown",(()=>{e.target=null})),e.on("pointerover",(()=>{e.setTint(65280)})),e.on("pointerout",(()=>{e.setTint(16777215)}))}const g=this.add.group(),m=new i(this,50,50);this.turrets.push(m),g.add(m,!0),this.add.rectangle(a.centerX,a.centerY,o,l,1118481).alpha=.9;const f=this.add.group();f.setDepth(2),this.slot_gfx=this.add.group({key:"blerb",frameQuantity:this.NUM_MOLES}).setDepth(1).getChildren();const p=(a.width-o)/2,u=(a.height-l)/2;for(let e=0;e<this.NUM_MOLES;e++){const t=e%this.NUM_COLS*130+65+p,s=130*Math.floor(e/this.NUM_COLS)+65+u;f.add(this.add.rectangle(t,s,130,130,3355443),!0),this.add.text(t-50,s-50,"QWERASD".split("")[e],{fontFamily:"Arial Black",fontSize:18,color:"#ffffff"}),this.slots.push(new h),this.slot_gfx[e].x=t,this.slot_gfx[e].y=s,this.slot_gfx[e].visible=!1}const b=f.getChildren();this.mole_cell_bg=b,b.forEach((e=>e.alpha=0)),this.keys=[s.keyboard.addKey(n.Q),s.keyboard.addKey(n.W),s.keyboard.addKey(n.E),s.keyboard.addKey(n.A),s.keyboard.addKey(n.S),s.keyboard.addKey(n.D)],this.add.particles(0,100,"drop",{x:{min:0,max:a.width},y:{min:0,max:a.height},quantity:2,lifespan:2500,blendMode:Phaser.BlendModes.MULTIPLY,accelerationX:[-100,100],accelerationY:[-100,100],scale:.1})}update(){const{keys:e,cells:t,turrets:s}=this;t.forEach((e=>{e.update(),e.target||(e.visible=!1)})),s.forEach((e=>{var s;const a=e.update(t);a&&(console.log("shoooo",a.x,a.y,!0),null==(s=this.cell_layer)||s.add(new o(this,a.x,a.y),!0))})),this.slots.forEach(((t,s)=>{t.alive?(e[s].isDown&&(t.alive=!1,this.mole_cell_bg[s].alpha=1,0==t.type?(this.score+=1,this.mole_cell_bg[s].fillColor=26112):(this.score-=20,this.mole_cell_bg[s].fillColor=4456448),this.tweens.add({targets:this.mole_cell_bg[s],alpha:0}),this.score_text.text=this.score,this.slot_gfx[s].visible=!1),t.timer--<=0&&(t.alive=!1,this.slot_gfx[s].visible=!1)):1==Phaser.Math.Between(0,200)&&(t.alive=!0,t.timer=150,t.type=Phaser.Math.Between(0,100)<65?0:1,this.slot_gfx[s].fillColor=3355443,this.slot_gfx[s].visible=!0,this.slot_gfx[s].play(["blerb2","blerb"][t.type]))}))}};t(l,"MAX_CELLS",30);let c=l;class d extends s.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class g extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.scene.start("Game")}}class m extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.spritesheet("walk","sheet.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb","blerb.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb2","blerb2.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("drop","drop.png",{frameWidth:64,frameHeight:64})}create(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("walk",{frames:[0,1,2,3,4,5,6,7,8,9,10]}),frameRate:10,repeat:-1}),this.anims.create({key:"blerb",frames:this.anims.generateFrameNumbers("blerb"),frameRate:10,repeat:-1}),this.anims.create({key:"blerb2",frames:this.anims.generateFrameNumbers("blerb2"),frameRate:10,repeat:-1}),this.anims.create({key:"drop",frames:this.anims.generateFrameNumbers("drop"),frameRate:12,repeat:-1}),this.scene.start("MainMenu")}}const f={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#000",pixelArt:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,m,g,c,d]};new s.Game(f);
