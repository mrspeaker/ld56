var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{p as s}from"./phaser-DJc9ez-r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}const r=Phaser.Input.Keyboard.KeyCodes;class i{constructor(){t(this,"type"),t(this,"alive",!1),t(this,"timer",0)}}class o extends s.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"background"),t(this,"msg_text"),t(this,"cody"),t(this,"keys"),t(this,"mole_cells"),t(this,"NUM_COLS",3),t(this,"NUM_ROWS",2),t(this,"NUM_MOLES",6),t(this,"score",0)}create(){const{add:e,input:t}=this;this.camera=this.cameras.main,this.camera.postFX.addVignette(.5,.5,.9);const s=e.text(512,384,"LD56",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"});if(s.setOrigin(.5),s.y=20,this.score_text=s,t.once("pointerdown",(()=>{this.scene.start("GameOver")})),!t.keyboard)return;const a=this.add.group({key:"walk",frameQuantity:30});a.getChildren().forEach((e=>e.playAfterDelay("walk",Phaser.Math.Between(0,1500)))),this.cells=a.getChildren(),this.cells.forEach((e=>{e.angle=Phaser.Math.Angle.RandomDegrees(),e.setScale(.65)}));const o=this.add.group();o.setDepth(2),this.mole_cell_gfx=this.add.group({key:"blerb",frameQuantity:this.NUM_MOLES}).setDepth(1).getChildren();const l=160*this.NUM_COLS,n=160*this.NUM_ROWS,h=(this.camera.width-l)/2,c=(this.camera.height-n)/2;this.mole_cells=[];for(let r=0;r<this.NUM_MOLES;r++){const e=r%this.NUM_COLS*160+65+h,t=160*Math.floor(r/this.NUM_COLS)+65+c;o.add(this.add.rectangle(e,t,130,130,3355443),!0),this.mole_cells.push(new i),this.mole_cell_gfx[r].type=0,this.mole_cell_gfx[r].x=e,this.mole_cell_gfx[r].y=t,this.mole_cell_gfx[r].visible=!1}const d=o.getChildren();this.mole_cell_bg=d,d.forEach((e=>e.alpha=0)),this.cursors=t.keyboard.createCursorKeys(),this.space=t.keyboard.addKey(r.SPACE),this.keys=[t.keyboard.addKey(r.Q),t.keyboard.addKey(r.W),t.keyboard.addKey(r.E),t.keyboard.addKey(r.A),t.keyboard.addKey(r.S),t.keyboard.addKey(r.D)];const m=e.sprite(100,100);m.setScale(1.5),m.play("walk"),this.cody=m;const g=new Phaser.Geom.Rectangle(0,0,this.sys.game.scale.gameSize.width,this.sys.game.scale.gameSize.height);Phaser.Actions.RandomRectangle(a.getChildren(),g)}update(){const{cody:e,keys:t,camera:s,cursors:a,space:r,cells:i}=this,o=s.centerX,l=s.centerY;let n=0,h=0;r.isDown&&(n+=10),a.right.isDown&&n++,a.left.isDown&&n--,a.down.isDown&&h++,a.up.isDown&&h--,i.forEach((e=>{const t=Phaser.Math.Angle.Between(e.x,e.y,o,l);if(e.x+=.2*Math.cos(t),e.y+=.2*Math.sin(t),Phaser.Math.Distance.Between(e.x,e.y,o,l)<20){const t=Phaser.Math.FloatBetween(0,2*Math.PI);e.x+=Math.cos(t)*s.width*.5,e.y+=Math.sin(t)*s.width*.5}})),this.mole_cells.forEach(((e,s)=>{e.alive?(t[s].isDown&&(e.alive=!1,this.mole_cell_bg[s].alpha=1,0==e.type?(this.score+=1,this.mole_cell_bg[s].fillColor=26112):(this.score-=20,this.mole_cell_bg[s].fillColor=4456448),this.tweens.add({targets:this.mole_cell_bg[s],alpha:0}),this.score_text.text=this.score,this.mole_cell_gfx[s].visible=!1),e.timer--<=0&&(e.alive=!1,this.mole_cell_gfx[s].visible=!1)):1==Phaser.Math.Between(0,100)&&(e.alive=!0,e.timer=150,e.type=Phaser.Math.Between(0,100)<80?0:1,this.mole_cell_bg[s].fillColor=3355443,this.mole_cell_gfx[s].visible=!0,this.mole_cell_gfx[s].play(["blerb2","blerb"][e.type]))})),n||h?(e.x+=n,e.y+=h,e.play("walk",!0)):e.stop()}}class l extends s.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class n extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.scene.start("Game")}}class h extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.spritesheet("walk","sheet.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb","blerb.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("blerb2","blerb2.png",{frameWidth:64,frameHeight:64})}create(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("walk",{frames:[0,1,2,3,4,5,6,7,8,9,10]}),frameRate:10,repeat:-1}),this.anims.create({key:"blerb",frames:this.anims.generateFrameNumbers("blerb"),frameRate:10,repeat:-1}),this.anims.create({key:"blerb2",frames:this.anims.generateFrameNumbers("blerb2"),frameRate:10,repeat:-1}),this.scene.start("MainMenu")}}const c={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#000",pixelArt:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,h,n,o,l]};new s.Game(c);
